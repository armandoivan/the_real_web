<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega Quiz Pro 2026</title>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --dark: #1e293b;
            --light: #f8fafc;
            --success: #22c55e;
            --error: #ef4444;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: #0f172a;
            color: var(--light);
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: #1e293b;
            width: 95%;
            max-width: 700px;
            padding: 2rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .hidden { display: none; }

        /* Pantalla de Inicio */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1.5rem; }
        select, button {
            padding: 12px;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
        }
        select { background: #334155; color: white; width: 100%; }

        .btn-start {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            font-weight: bold;
            grid-column: span 2;
            margin-top: 1rem;
        }

        /* Quiz UI */
        .header-quiz { display: flex; justify-content: space-between; margin-bottom: 2rem; }
        .stats-bar { font-size: 0.9rem; color: #94a3b8; }
        
        .question-card h2 { font-size: 1.5rem; margin-bottom: 1.5rem; }
        .options-grid { display: grid; gap: 0.8rem; }
        
        .opt-btn {
            background: #334155;
            color: white;
            text-align: left;
            transition: 0.3s;
        }
        .opt-btn:hover { background: #475569; }
        .opt-btn.correct { background: var(--success) !important; }
        .opt-btn.wrong { background: var(--error) !important; }

        /* Historial */
        .history-table {
            width: 100%;
            margin-top: 2rem;
            border-collapse: collapse;
            font-size: 0.8rem;
        }
        .history-table th { border-bottom: 1px solid #475569; padding: 10px; text-align: left; }
        .history-table td { padding: 10px; border-bottom: 1px solid #334155; }

        .tag { padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; text-transform: uppercase; }
        .tag-easy { background: #22c55e33; color: #4ade80; }
        .tag-hard { background: #ef444433; color: #f87171; }
    </style>
</head>
<body>

<div class="container">
    <div id="view-menu">
        <h1>ðŸ§  Mega Quiz 2026</h1>
        <p>Selecciona tu desafÃ­o:</p>
        
        <div class="menu-grid">
            <div>
                <label>CategorÃ­a</label>
                <select id="sel-category">
                    <option value="deportes">âš½ Deportes</option>
                    <option value="historia">ðŸ“œ Historia</option>
                    <option value="ciencia">ðŸ§ª Ciencia</option>
                    <option value="television">ðŸ“º TelevisiÃ³n</option>
                </select>
            </div>
            <div>
                <label>Dificultad</label>
                <select id="sel-difficulty">
                    <option value="facil">FÃ¡cil</option>
                    <option value="medio">Intermedio</option>
                    <option value="dificil">DifÃ­cil</option>
                </select>
            </div>
            <button class="btn-start" onclick="startQuiz()">EMPEZAR JUEGO</button>
        </div>

        <div id="history-section">
            <h3>Ãšltimos Intentos</h3>
            <table class="history-table">
                <thead><tr><th>Fecha</th><th>Tema</th><th>Puntos</th></tr></thead>
                <tbody id="history-body"></tbody>
            </table>
        </div>
    </div>

    <div id="view-quiz" class="hidden">
        <div class="header-quiz">
            <span id="quiz-info" class="stats-bar"></span>
            <span id="quiz-score" class="stats-bar">Puntos: 0</span>
        </div>
        <div class="question-card">
            <h2 id="q-text">Pregunta</h2>
            <div id="options-box" class="options-grid"></div>
        </div>
    </div>

    <div id="view-results" class="hidden" style="text-align:center">
        <h2 id="res-title">Â¡Buen trabajo!</h2>
        <p style="font-size: 3rem" id="res-score">0/0</p>
        <button onclick="location.reload()" class="btn-start">Volver al MenÃº</button>
    </div>
</div>

<script>
    // --- BANCO DE PREGUNTAS (Estructura expandible) ---
    const DB = {
        deportes: {
            facil: [
                {q: "Â¿CuÃ¡ntos jugadores tiene un equipo de fÃºtbol?", a: ["11", "10", "12", "9"], c: 0},
                {q: "Â¿QuÃ© deporte practica Rafa Nadal?", a: ["Golf", "Tenis", "FÃºtbol", "Boxeo"], c: 1}
            ],
            dificil: [
                {q: "Â¿QuiÃ©n ganÃ³ el primer mundial de la historia?", a: ["Brasil", "Uruguay", "Italia", "Argentina"], c: 1},
                {q: "Â¿En quÃ© aÃ±o se celebraron los primeros JJ.OO modernos?", a: ["1896", "1900", "1924", "1888"], c: 0}
            ]
        },
        historia: {
            facil: [
                {q: "Â¿QuiÃ©n descubriÃ³ AmÃ©rica?", a: ["Magallanes", "ColÃ³n", "Elcano", "Vespucio"], c: 1},
                {q: "Â¿QuÃ© paÃ­s regalÃ³ la Estatua de la Libertad a EE.UU?", a: ["Francia", "EspaÃ±a", "Italia", "Alemania"], c: 0}
            ]
        },
        ciencia: {
            medio: [
                {q: "Â¿CuÃ¡l es el planeta mÃ¡s grande del sistema solar?", a: ["Tierra", "Marte", "JÃºpiter", "Saturno"], c: 2}
            ]
        }
    };

    // Estado del juego
    let currentQuestions = [];
    let qIndex = 0;
    let score = 0;
    let selectedCat = "";
    let selectedDif = "";

    function startQuiz() {
        selectedCat = document.getElementById('sel-category').value;
        selectedDif = document.getElementById('sel-difficulty').value;

        // Verificar si existen preguntas para esa combinaciÃ³n
        if (!DB[selectedCat] || !DB[selectedCat][selectedDif]) {
            alert("Esta combinaciÃ³n aÃºn no tiene preguntas. Prueba Deportes/FÃ¡cil.");
            return;
        }

        // Cargar y mezclar preguntas para que no se repitan
        currentQuestions = [...DB[selectedCat][selectedDif]].sort(() => Math.random() - 0.5);
        qIndex = 0;
        score = 0;

        document.getElementById('view-menu').classList.add('hidden');
        document.getElementById('view-quiz').classList.remove('hidden');
        showQuestion();
    }

    function showQuestion() {
        const qData = currentQuestions[qIndex];
        document.getElementById('quiz-info').innerText = `Pregunta ${qIndex + 1} de ${currentQuestions.length} (${selectedCat})`;
        document.getElementById('q-text').innerText = qData.q;
        
        const box = document.getElementById('options-box');
        box.innerHTML = "";

        qData.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'opt-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i, btn);
            box.appendChild(btn);
        });
    }

    function checkAnswer(idx, btn) {
        const correct = currentQuestions[qIndex].c;
        const allBtns = document.querySelectorAll('.opt-btn');
        allBtns.forEach(b => b.disabled = true);

        if (idx === correct) {
            btn.classList.add('correct');
            score++;
            document.getElementById('quiz-score').innerText = `Puntos: ${score}`;
        } else {
            btn.classList.add('wrong');
            allBtns[correct].classList.add('correct');
        }

        setTimeout(() => {
            qIndex++;
            if (qIndex < currentQuestions.length) {
                showQuestion();
            } else {
                finishQuiz();
            }
        }, 1500);
    }

    function finishQuiz() {
        document.getElementById('view-quiz').classList.add('hidden');
        document.getElementById('view-results').classList.remove('hidden');
        document.getElementById('res-score').innerText = `${score} / ${currentQuestions.length}`;
        
        saveAttempt();
    }

    // --- SISTEMA DE PUNTUACIONES (LocalStorage) ---
    function saveAttempt() {
        const attempts = JSON.parse(localStorage.getItem('quiz_history') || '[]');
        const newAttempt = {
            date: new Date().toLocaleDateString(),
            cat: selectedCat,
            dif: selectedDif,
            score: `${score}/${currentQuestions.length}`
        };
        attempts.unshift(newAttempt);
        localStorage.setItem('quiz_history', JSON.stringify(attempts.slice(0, 5))); // Guardar Ãºltimos 5
        loadHistory();
    }

    function loadHistory() {
        const attempts = JSON.parse(localStorage.getItem('quiz_history') || '[]');
        const body = document.getElementById('history-body');
        body.innerHTML = attempts.map(a => `
            <tr>
                <td>${a.date}</td>
                <td>${a.cat} <span class="tag tag-${a.dif}">${a.dif}</span></td>
                <td>${a.score}</td>
            </tr>
        `).join('');
    }

    // Inicializar
    window.onload = loadHistory;
</script>
</body>
</html>
