<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Action Heroes Arena</title>

<style>
body{
margin:0;
font-family:Arial, Helvetica, sans-serif;
background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
color:white;
}

header{
text-align:center;
padding:20px;
font-size:30px;
font-weight:bold;
background:#e50914;
}

.controls{
text-align:center;
padding:15px;
}

input{
padding:10px;
border-radius:20px;
border:none;
width:250px;
}

button{
padding:8px 15px;
margin:5px;
border:none;
border-radius:20px;
background:#333;
color:white;
cursor:pointer;
}

button:hover{
background:#e50914;
}

.container{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
gap:20px;
padding:20px;
}

.card{
background:#1c1c1c;
border-radius:15px;
padding:15px;
text-align:center;
cursor:pointer;
transition:0.3s;
box-shadow:0 0 10px black;
}

.card:hover{
transform:scale(1.05);
}

.avatar{
height:120px;
border-radius:10px;
display:flex;
align-items:center;
justify-content:center;
font-size:40px;
font-weight:bold;
background:linear-gradient(45deg,#e50914,#b81d24);
}

.stars span{
font-size:22px;
cursor:pointer;
color:gray;
}

.stars .active{
color:gold;
}

.top10, .vs, .tournament{
background:#111;
padding:15px;
margin:15px;
border-radius:10px;
}

.modal{
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
background:rgba(0,0,0,0.9);
display:none;
justify-content:center;
align-items:center;
}

.modal-content{
background:#1c1c1c;
padding:25px;
border-radius:15px;
width:500px;
max-height:80%;
overflow-y:auto;
}

.close{
float:right;
cursor:pointer;
color:#e50914;
font-size:20px;
}

h2{
margin-top:0;
}
</style>
</head>

<body>

<header>üî• ACTION HEROES ARENA üî•</header>

<div class="controls">
<input type="text" placeholder="Buscar h√©roe..." oninput="searchHero(this.value)">
<button onclick="startTournament()">ü•ä Modo Torneo</button>
</div>

<div class="top10">
<h2>üèÜ Top 10 Global</h2>
<ol id="topList"></ol>
</div>

<div class="vs">
<h2>‚öîÔ∏è Comparador</h2>
<select id="hero1"></select>
<select id="hero2"></select>
<button onclick="compareHeroes()">Comparar</button>
<p id="vsResult"></p>
</div>

<div class="tournament" id="tournamentArea" style="display:none;">
<h2>ü•ä Torneo Eliminatorio</h2>
<p id="match"></p>
<button onclick="voteTournament(1)">Votar Izquierda</button>
<button onclick="voteTournament(2)">Votar Derecha</button>
</div>

<div class="container" id="heroes"></div>

<div class="modal" id="modal">
<div class="modal-content" id="modalContent"></div>
</div>

<script>
const heroes = [
{
name:"Rambo",
description:`John Rambo es un veterano de la Guerra de Vietnam marcado por el trauma y el rechazo social. 
Especialista en supervivencia extrema, combate de guerrilla y armas pesadas, 
representa el arquetipo del soldado imparable. 
Su capacidad de resistencia f√≠sica y mental lo convierte en una aut√©ntica m√°quina de guerra individual.`,
},
{
name:"John Wick",
description:`John Wick es un asesino legendario conocido en el mundo criminal como "Baba Yaga". 
Combina artes marciales, precisi√≥n con armas y una inteligencia t√°ctica extraordinaria. 
Tras la muerte de su perro ‚Äî√∫ltimo recuerdo de su esposa‚Äî desata una ola de violencia met√≥dica y elegante.`,
},
{
name:"Terminator T-800",
description:`El T-800 es un cyborg asesino enviado desde el futuro. 
Posee fuerza sobrehumana, resistencia extrema y una programaci√≥n de combate perfecta. 
Aunque fue dise√±ado para destruir, demuestra evoluci√≥n emocional y capacidad de aprendizaje.`,
},
{
name:"Neo",
description:`Neo es el Elegido dentro de Matrix. 
Capaz de manipular la realidad digital, detener balas y volar, 
representa la liberaci√≥n de la mente humana frente al control de las m√°quinas.`,
},
{
name:"Bruce Lee",
description:`Bruce Lee revolucion√≥ el cine de acci√≥n y las artes marciales. 
Su velocidad, precisi√≥n y filosof√≠a del Jeet Kune Do cambiaron la percepci√≥n mundial del combate. 
M√°s que un luchador, fue un pensador y visionario.`,
},
{
name:"Rocky Balboa",
description:`Rocky Balboa es el s√≠mbolo del esfuerzo y la superaci√≥n. 
Desde sus humildes or√≠genes en Filadelfia hasta convertirse en campe√≥n mundial, 
su fuerza no solo es f√≠sica sino emocional.`,
},
{
name:"Predator",
description:`El Predator es un cazador alien√≠gena con tecnolog√≠a avanzada, invisibilidad y visi√≥n t√©rmica. 
Busca oponentes dignos y considera la caza un ritual de honor.`,
}
];

let ratings = JSON.parse(localStorage.getItem("ratings")) || {};
let votes = JSON.parse(localStorage.getItem("votes")) || {};
let searchText = "";

function renderHeroes(){
const container=document.getElementById("heroes");
container.innerHTML="";

heroes
.filter(h=>h.name.toLowerCase().includes(searchText.toLowerCase()))
.sort((a,b)=>getAverage(b.name)-getAverage(a.name))
.forEach(hero=>{
container.innerHTML+=`
<div class="card" onclick="openModal('${hero.name}')">
<div class="avatar">${hero.name.charAt(0)}</div>
<h3>${hero.name}</h3>
<div class="stars" onclick="event.stopPropagation()">
${[1,2,3,4,5].map(i=>
`<span onclick="rateHero('${hero.name}',${i})"
class="${i<=Math.round(getAverage(hero.name))?'active':''}">‚òÖ</span>`
).join("")}
</div>
<p>‚≠ê ${getAverage(hero.name).toFixed(1)} (${votes[hero.name]||0} votos)</p>
</div>
`;
});
renderTop10();
renderSelects();
}

function rateHero(name,value){
ratings[name]=(ratings[name]||0)+value;
votes[name]=(votes[name]||0)+1;
localStorage.setItem("ratings",JSON.stringify(ratings));
localStorage.setItem("votes",JSON.stringify(votes));
renderHeroes();
}

function getAverage(name){
if(!ratings[name]) return 0;
return ratings[name]/votes[name];
}

function renderTop10(){
let sorted=[...heroes].sort((a,b)=>getAverage(b.name)-getAverage(a.name)).slice(0,10);
document.getElementById("topList").innerHTML=
sorted.map(h=>`<li>${h.name} - ${getAverage(h.name).toFixed(1)}</li>`).join("");
}

function renderSelects(){
document.getElementById("hero1").innerHTML=
heroes.map(h=>`<option>${h.name}</option>`).join("");
document.getElementById("hero2").innerHTML=
heroes.map(h=>`<option>${h.name}</option>`).join("");
}

function compareHeroes(){
let h1=document.getElementById("hero1").value;
let h2=document.getElementById("hero2").value;
let r1=getAverage(h1);
let r2=getAverage(h2);
let result=r1>r2?`üèÜ ${h1} ganar√≠a.`:r2>r1?`üèÜ ${h2} ganar√≠a.`:"ü§ù Empate.";
document.getElementById("vsResult").innerText=result;
}

function searchHero(text){
searchText=text;
renderHeroes();
}

function openModal(name){
const hero=heroes.find(h=>h.name===name);
document.getElementById("modalContent").innerHTML=`
<span class="close" onclick="closeModal()">‚úñ</span>
<h2>${hero.name}</h2>
<p style="line-height:1.6">${hero.description}</p>
<p><strong>Puntuaci√≥n media:</strong> ${getAverage(name).toFixed(1)}</p>
`;
document.getElementById("modal").style.display="flex";
}

function closeModal(){
document.getElementById("modal").style.display="none";
}

/* -------- MODO TORNEO -------- */

let tournament=[];
let currentMatch=[];

function startTournament(){
tournament=[...heroes].sort(()=>Math.random()-0.5);
document.getElementById("tournamentArea").style.display="block";
nextMatch();
}

function nextMatch(){
if(tournament.length<2){
document.getElementById("match").innerText="üèÜ Campe√≥n: "+tournament[0].name;
return;
}
currentMatch=[tournament.shift(),tournament.shift()];
document.getElementById("match").innerText=
currentMatch[0].name+" VS "+currentMatch[1].name;
}

function voteTournament(side){
let winner=side===1?currentMatch[0]:currentMatch[1];
tournament.push(winner);
nextMatch();
}

renderHeroes();
</script>

</body>
</html>
